language: python
python:
    - "3.4"

before_script:
  - npm install jshint mocha blanket mocha-lcov-reporter coveralls

install: "pip install -r requirements/development.txt"

script:
    - coverage run manage.py test --settings=eggtimer.settings.development
    - flake8
    - NODE_ENV=test EGGTIMER_COVERAGE=1 mocha --reporter mocha-lcov-reporter */tests/static/js/* | ./node_modules/coveralls/bin/coveralls.js
    - jshint */static/js

after_success:
    coveralls
